<launch>
    <include file="$(find raspicam_node)/launch/camerav2_410x308_30fps.launch" />
    <node name="turtle_pi_sr_motor" pkg="turtle_pi_sr_motor" type="sr-motor-control.py" />
    <node name="turtle_twist_control" pkg="turtle_twist_ctrl" type="turtle_twist_ctrl.py" />
    <node name="camera_configure" pkg="dynamic_reconfigure" type="dynparam" args="load /raspicam_node $(find turtle_pi)/config/raspicam_config.yaml" />
    <node name="camera_relay" pkg="topic_tools" type="relay" args="/raspicam_node/image/compressed /compressed_image" />

    <node pkg="robot_state_publisher" type="robot_state_publisher"  name="robot_state_publisher" respawn="false" output="screen">
        <param name="publish_frequency" type="double" value="30.0" />
    </node>

    <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find turtle_pi_description)/urdf/turtle_pi.urdf'" />
    <rosparam command="load" file="$(find turtle_pi_description)/config/turtle_pi.yaml"/>

    <node name="turtle_pi_controller_spawner" pkg="controller_manager" type="spawner" output="screen" respawn="false"
        args="turtle_pi_joint_state_controller"/>

    <node name="twist_relay" pkg="topic_tools" type="relay" args="/cmd_vel /turtle_pi_diff_drive_controller/cmd_vel" />
</launch>
